        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>DistanceElection&lt;TVoter, TCandidate&gt; Class / vote_map Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="vote_map" data-type="DistanceElection&amp;lt;TVoter, TCandidate&amp;gt;">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../vote_map.html">vote_map</a> &rsaquo; <a href="../vote_map/DistanceElection.html">DistanceElection&lt;TVoter, TCandidate&gt;</a></div>
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>DistanceElection&lt;TVoter extends MapPlayer, TCandidate extends MapPlayer&gt;</strong>
          Class
        </h2>
        
<div class="doc">

</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../vote/Election.html">Election</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>DistanceElection&lt;TVoter, TCandidate&gt;</strong></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="DistanceElection">
<span class="show-code">Code</span>
new <strong>DistanceElection</strong>._internal(candidates, ballots, places) <a class="anchor-link" href="#DistanceElection"
              title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.DistanceElection">#</a></h4>
<div class="doc">

<pre class="source">
DistanceElection._internal(this.candidates, this.ballots,
  this.places);
</pre>
</div>
</div>
<div class="method"><h4 id="DistanceElection">
<span class="show-code">Code</span>
factory <strong>DistanceElection</strong>.fromData(<a href="../vote_map/LocationData.html">LocationData</a> data) <a class="anchor-link" href="#DistanceElection"
              title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.DistanceElection">#</a></h4>
<div class="doc">

<pre class="source">
factory DistanceElection.fromData(LocationData data) {
  return new DistanceElection(data.voters, data.candidates);
}
</pre>
</div>
</div>
<div class="method"><h4 id="DistanceElection">
<span class="show-code">Code</span>
factory <strong>DistanceElection</strong>(<a href="../core/Iterable.html">Iterable</a>&lt;<a href="../vote_map/DistanceElection.html">TVoter</a>&gt; voters, <a href="../core/Iterable.html">Iterable</a>&lt;<a href="../vote_map/DistanceElection.html">TCandidate</a>&gt; candidates) <a class="anchor-link" href="#DistanceElection"
              title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.DistanceElection">#</a></h4>
<div class="doc">

<pre class="source">
factory DistanceElection(Iterable&lt;TVoter&gt; voters, Iterable&lt;TCandidate&gt; candidates) {
  final cans = new ReadOnlyCollection&lt;TCandidate&gt;(candidates);

  final ballots = $(voters)
      .select((voter) =&gt; new DistanceBallot&lt;MapPlayer, MapPlayer&gt;(voter, cans))
      .toReadOnlyCollection();

  //
  // Places
  //
  final distanceGroups = $(cans).group((candidate) {
    num sumOfDistance = 0;
    num sumOfSquaredDistance = 0;
    int count = 0;
    for(final b in ballots) {
      final distance = b.getDistance(candidate);
      sumOfDistance += distance;
      sumOfSquaredDistance += distance * distance;
      count++;
    }

    return new Tuple&lt;num, num&gt;(sumOfDistance / count, sumOfSquaredDistance / count);
  });

  final distances = new List&lt;Tuple&lt;num,num&gt;&gt;.from(distanceGroups.getKeys());
  distances.sort((a,b) =&gt; a.Item1.compareTo(b.Item1));

  int placeNumber = 1;
  final places = $(distances).select((d) {
    var placeCans = distanceGroups[d];
    final place = new DistanceElectionPlace(placeNumber, placeCans,
      d.Item1, d.Item2);
    placeNumber += placeCans.length;
    return place;
  }).toReadOnlyCollection();

  return new DistanceElection._internal(cans, ballots, places);
}
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="ballots">
<span class="show-code">Code</span>
final <a href="../dartlib_core/ReadOnlyCollection.html">ReadOnlyCollection</a>&lt;<a href="../vote_map/DistanceBallot.html">DistanceBallot</a>&lt;<a href="../vote_map/DistanceElection.html">TVoter</a>, <a href="../vote_map/DistanceElection.html">TCandidate</a>&gt;&gt;         <strong>ballots</strong> <a class="anchor-link"
            href="#ballots"
            title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.ballots">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final ReadOnlyCollection&lt;DistanceBallot&lt;TVoter, TCandidate&gt;&gt; ballots;
</pre>
</div>
</div>
<div class="field"><h4 id="candidates">
<span class="show-code">Code</span>
final <a href="../dartlib_core/ReadOnlyCollection.html">ReadOnlyCollection</a>&lt;<a href="../vote_map/DistanceElection.html">TCandidate</a>&gt;         <strong>candidates</strong> <a class="anchor-link"
            href="#candidates"
            title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.candidates">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final ReadOnlyCollection&lt;TCandidate&gt; candidates;
</pre>
</div>
</div>
<div class="field"><h4 id="places">
<span class="show-code">Code</span>
final <a href="../dartlib_core/ReadOnlyCollection.html">ReadOnlyCollection</a>&lt;<a href="../vote_map/DistanceElectionPlace.html">DistanceElectionPlace</a>&lt;<a href="../vote_map/DistanceElection.html">TCandidate</a>&gt;&gt;         <strong>places</strong> <a class="anchor-link"
            href="#places"
            title="Permalink to DistanceElection&lt;TVoter, TCandidate&gt;.places">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final ReadOnlyCollection&lt;DistanceElectionPlace&lt;TCandidate&gt;&gt; places;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
